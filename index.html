<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pet Simulator</title>
  <style>
    :root{
      --bg: #0b0f14;
      --card: #121823;
      --text: #e7edf5;
      --muted: #9db0c3;
      --accent: #5cc8ff;
      --danger: #ff6b6b;
      --warn: #ffd166;
      --ok: #6ee7b7;
      --shadow: 0 10px 20px rgba(0,0,0,.35);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b0f14,#0a1018 50%,#0b0f14);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;min-height:100svh;display:grid;place-items:center}
    .wrap{width:min(900px,92vw);padding:28px}
    .card{background:var(--card);border:1px solid #1e2a3a;border-radius:var(--radius);box-shadow:var(--shadow);padding:22px}
    h1{margin:0 0 6px;font-weight:800;letter-spacing:.2px}
    h2{margin:12px 0 8px;color:var(--muted);font-weight:600}
    .row{display:flex;gap:16px;flex-wrap:wrap}
    .col{flex:1 1 260px}

    .stats{display:grid;gap:12px;margin:12px 0 4px}
    .stat{background:#0d141f;border:1px solid #1c2a3b;border-radius:14px;padding:12px}
    .label{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;color:var(--muted);font-size:14px}
    .bar{position:relative;height:12px;background:#0b121c;border-radius:999px;overflow:hidden;border:1px solid #183047}
    .bar > span{position:absolute;inset:0 0 0 auto;width:0;background:linear-gradient(90deg,#2dd4bf,#60a5fa,#5cc8ff);transition:width .35s ease}
    .value{font-weight:700;color:var(--text)}

    .actions{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
    button{appearance:none;border:none;border-radius:14px;padding:14px 16px;font-weight:700;background:#122033;color:var(--text);cursor:pointer;transition:transform .06s ease, background .2s ease, border-color .2s ease;box-shadow:var(--shadow);border:1px solid #1b3149}
    button:hover{background:#15263d}
    button:active{transform:translateY(1px)}
    button[disabled]{opacity:.5;cursor:not-allowed}
    .feed{border-color:#1f6e4f}
    .play{border-color:#3a5bb5}
    .sleep{border-color:#5a3ab5}
    .bathe{border-color:#2b6c7a}
    .skip{border-color:#555}
    .quit{border-color:#7a2b2b}

    .petline{display:flex;align-items:center;gap:10px;margin-bottom:8px}
    .pet{width:56px;height:56px;border-radius:50%;background:radial-gradient(circle at 35% 30%, #ffe8a8 0 35%, #ffcf70 36% 100%);box-shadow:0 6px 18px rgba(0,0,0,.35), inset 0 0 0 2px rgba(0,0,0,.15)}
    .name{font-size:20px;font-weight:800}
    .age{color:var(--muted);font-weight:600}

    .log{margin-top:14px;background:#0c1522;border:1px solid #17314e;border-radius:14px;padding:10px;max-height:150px;overflow:auto;font-size:14px}
    .log p{margin:6px 0}
    .pill{display:inline-block;padding:3px 8px;border-radius:999px;font-size:12px;font-weight:800;margin-left:6px}
    .ok{background:#113327;color:var(--ok)}
    .warn{background:#332b11;color:var(--warn)}
    .bad{background:#331313;color:var(--danger)}

    .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:grid;place-items:center;padding:18px}
    .modal .card{max-width:520px}
    .inputrow{display:flex;gap:10px;margin-top:8px}
    .inputrow input{flex:1;border-radius:12px;border:1px solid #2b3e59;background:#0b121c;color:var(--text);padding:12px 14px;font-size:16px}

    .hint{color:var(--muted);font-size:13px;margin-top:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="petline">
        <div class="pet" aria-hidden="true"></div>
        <div>
          <div class="name" id="petName">Your Pet</div>
          <div class="age" id="petAge">Age: 0 years</div>
        </div>
      </div>

      <div class="stats">
        <div class="stat">
          <div class="label"><span>Hunger</span><span class="value" id="hungerVal">30</span></div>
          <div class="bar"><span id="hungerBar"></span></div>
        </div>
        <div class="stat">
          <div class="label"><span>Energy</span><span class="value" id="energyVal">70</span></div>
          <div class="bar"><span id="energyBar"></span></div>
        </div>
        <div class="stat">
          <div class="label"><span>Happiness</span><span class="value" id="happinessVal">70</span></div>
          <div class="bar"><span id="happinessBar"></span></div>
        </div>
      </div>

      <h2>Actions</h2>
      <div class="actions">
        <button class="feed"   id="feedBtn">üçñ Feed</button>
        <button class="play"   id="playBtn">üéæ Play</button>
        <button class="sleep"  id="sleepBtn">üõå Sleep</button>
        <button class="bathe"  id="batheBtn">üõÅ Bathe</button>
        <button class="skip"   id="skipBtn">‚è≠Ô∏è Skip</button>
        <button class="quit"   id="quitBtn">üö™ Quit</button>
      </div>

      <div class="log" id="log"></div>
      <div class="hint">Tip: keep Hunger low (0 best), and Energy/Happiness high. Game ends if Hunger ‚â• 100, Energy ‚â§ 0, or Happiness ‚â§ 0.</div>
    </div>
  </div>

  <!-- Name modal -->
  <div class="modal" id="nameModal" role="dialog" aria-modal="true">
    <div class="card">
      <h2>Name your pet</h2>
      <div class="inputrow">
        <input id="nameInput" placeholder="e.g., Mochi" maxlength="24" />
        <button id="startBtn">Start</button>
      </div>
      <div class="hint">You can change the name later by refreshing. Progress is saved locally.</div>
    </div>
  </div>

  <script>
    // --- State ---
    const state = {
      name: localStorage.getItem('pet_name') || 'Your Pet',
      hunger: +(localStorage.getItem('pet_hunger') ?? 30),
      energy: +(localStorage.getItem('pet_energy') ?? 70),
      happiness: +(localStorage.getItem('pet_happiness') ?? 70),
      age: +(localStorage.getItem('pet_age') ?? 0),
      alive: true,
    };

    // --- Elements ---
    const petName = document.getElementById('petName');
    const petAge  = document.getElementById('petAge');
    const hungerVal = document.getElementById('hungerVal');
    const energyVal = document.getElementById('energyVal');
    const happinessVal = document.getElementById('happinessVal');
    const hungerBar = document.getElementById('hungerBar');
    const energyBar = document.getElementById('energyBar');
    const happinessBar = document.getElementById('happinessBar');
    const logArea = document.getElementById('log');

    const btn = {
      feed: document.getElementById('feedBtn'),
      play: document.getElementById('playBtn'),
      sleep: document.getElementById('sleepBtn'),
      bathe: document.getElementById('batheBtn'),
      skip: document.getElementById('skipBtn'),
      quit: document.getElementById('quitBtn'),
    };

    const modal = document.getElementById('nameModal');
    const nameInput = document.getElementById('nameInput');
    const startBtn = document.getElementById('startBtn');

    // --- Helpers ---
    function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }
    function save(){
      localStorage.setItem('pet_name', state.name);
      localStorage.setItem('pet_hunger', state.hunger);
      localStorage.setItem('pet_energy', state.energy);
      localStorage.setItem('pet_happiness', state.happiness);
      localStorage.setItem('pet_age', state.age);
    }
    function println(msg){
      const p = document.createElement('p');
      p.innerHTML = msg;
      logArea.prepend(p);
    }
    function setPill(num, goodHigh=false){
      // Returns a class pill depending on value
      if(goodHigh){
        if(num >= 70) return '<span class="pill ok">GOOD</span>';
        if(num >= 35) return '<span class="pill warn">OK</span>';
        return '<span class="pill bad">LOW</span>';
      } else { // hunger (low good)
        if(num <= 20) return '<span class="pill ok">GOOD</span>';
        if(num <= 60) return '<span class="pill warn">OK</span>';
        return '<span class="pill bad">HIGH</span>';
      }
    }

    function render(){
      petName.textContent = state.name;
      petAge.textContent = `Age: ${state.age} year${state.age===1?'':'s'}`;

      hungerVal.textContent = state.hunger;
      energyVal.textContent = state.energy;
      happinessVal.textContent = state.happiness;

      hungerBar.style.width = clamp(state.hunger,0,100) + '%';
      energyBar.style.width = clamp(state.energy,0,100) + '%';
      happinessBar.style.width = clamp(state.happiness,0,100) + '%';

      // Disable buttons if game ended
      const dis = !state.alive;
      Object.values(btn).forEach(b => b.disabled = dis);

      save();
    }

    function naturalTick(){
      state.hunger = clamp(state.hunger + 2, 0, 100);
      state.energy = clamp(state.energy - 2, 0, 100);
      state.happiness = clamp(state.happiness - 2, 0, 100);
    }

    function checkGameOver(){
      if(state.hunger >= 100){
        println(`üòø <strong>${state.name}</strong> is starving! <span class="pill bad">GAME OVER</span>`);
        endGame();
        return true;
      }
      if(state.energy <= 0){
        println(`üí§ <strong>${state.name}</strong> is exhausted! <span class="pill bad">GAME OVER</span>`);
        endGame();
        return true;
      }
      if(state.happiness <= 0){
        println(`üò≠ <strong>${state.name}</strong> is too sad! <span class="pill bad">GAME OVER</span>`);
        endGame();
        return true;
      }
      return false;
    }

    function endGame(){
      state.alive = false;
      render();
    }

    function afterAction(){
      naturalTick();
      render();
      if(!checkGameOver()){
        // status hints
        const status = [
          `üçó Hunger ${state.hunger} ${setPill(state.hunger,false)}`,
          `‚ö° Energy ${state.energy} ${setPill(state.energy,true)}`,
          `üòä Happiness ${state.happiness} ${setPill(state.happiness,true)}`
        ].join(' ‚Ä¢ ');
        println(status);
      }
    }

    // --- Actions ---
    btn.feed.addEventListener('click', () => {
      if(!state.alive) return;
      state.hunger = clamp(state.hunger - 20, 0, 100);
      state.energy = clamp(state.energy + 10, 0, 100);
      state.happiness = clamp(state.happiness + 5, 0, 100);
      println(`üçñ You fed <strong>${state.name}</strong>.`);
      afterAction();
    });

    btn.play.addEventListener('click', () => {
      if(!state.alive) return;
      state.happiness = clamp(state.happiness + 15, 0, 100);
      state.hunger = clamp(state.hunger + 10, 0, 100);
      state.energy = clamp(state.energy - 15, 0, 100);
      println(`üéæ You played with <strong>${state.name}</strong>. Lots of fun!`);
      afterAction();
    });

    btn.sleep.addEventListener('click', () => {
      if(!state.alive) return;
      state.energy = clamp(state.energy + 20, 0, 100);
      state.hunger = clamp(state.hunger + 5, 0, 100);
      state.age += 1;
      println(`üõå <strong>${state.name}</strong> took a nap. +1 age`);
      afterAction();
    });

    btn.bathe.addEventListener('click', () => {
      if(!state.alive) return;
      state.happiness = clamp(state.happiness - 5, 0, 100);
      state.energy = clamp(state.energy - 5, 0, 100);
      println(`üõÅ Bath time for <strong>${state.name}</strong>. Not a fan‚Ä¶`);
      afterAction();
    });

    btn.skip.addEventListener('click', () => {
      if(!state.alive) return;
      println(`‚è≠Ô∏è You waited a bit.`);
      afterAction();
    });

    btn.quit.addEventListener('click', () => {
      println(`üö™ You ended the game for <strong>${state.name}</strong>. <span class="pill warn">SESSION ENDED</span>`);
      endGame();
    });

    // --- Modal logic ---
    function openNameModal(){ modal.style.display = 'grid'; nameInput.focus(); }
    function closeNameModal(){ modal.style.display = 'none'; }

    startBtn.addEventListener('click', () => {
      const v = nameInput.value.trim();
      if(v){ state.name = v; localStorage.setItem('pet_name', v); }
      closeNameModal();
      render();
      println(`‚ú® Welcome, <strong>${state.name}</strong>! Take good care.`);
    });
    nameInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter') startBtn.click(); });

    // --- Init ---
    function init(){
      render();
      if(state.name === 'Your Pet'){ openNameModal(); }
    }
    init();
  </script>
</body>
</html>
